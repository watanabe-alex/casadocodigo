"use strict";

var escapeXml = require("./escape-xml");
var escapeSingleQuotes = escapeXml.s;
var escapeDoubleQuotes = escapeXml.d;
var FLAG_WILL_RERENDER_IN_BROWSER = 1;
// var FLAG_HAS_BODY_EL = 2;
// var FLAG_HAS_HEAD_EL = 4;

module.exports = function dataMarko(props, key, componentDef) {
  var result = "";
  var willNotRerender = !componentDef || componentDef._F_ && (componentDef._G_ & FLAG_WILL_RERENDER_IN_BROWSER) === 0 || componentDef._C_.s_;

  if (willNotRerender) {
    if (props) {
      // eslint-disable-next-line no-unused-vars
      for (var _ in props) {
        result += " data-marko='" + escapeSingleQuotes(JSON.stringify(props)) + "'";
        break;
      }
    }

    if (key && key[0] === "@") {
      result += ' data-marko-key="' + escapeDoubleQuotes(componentDef._I_(key) + " " + componentDef.id) + '"';
    }
  }

  return result;
};