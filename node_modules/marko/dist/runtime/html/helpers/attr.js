"use strict";

var escape = require("./escape-xml");
var escapeDoubleQuotes = escape.d;
var escapeSingleQuotes = escape.s;
var complain;

module.exports = function attr(name, value) {
  if (value == null || value === false) {
    return "";
  }

  var result = " " + name;

  if (value === true) {
    return result;
  }

  var type = typeof value;
  result += "=";

  if (type === "number") {
    return result + value;
  }

  if (type == "object") {
    switch (value.toString) {
      case Object.prototype.toString:
      case Array.prototype.toString:

        return result + singleQuote(JSON.stringify(value));
        // eslint-disable-next-line no-constant-condition

      case RegExp.prototype.toString:
        return result + doubleQuote(value.source);
    }
  }

  return result + doubleQuote(value);
};

function doubleQuote(value) {
  return '"' + escapeDoubleQuotes(value) + '"';
}

function singleQuote(value) {
  return "'" + escapeSingleQuotes(value) + "'";
}